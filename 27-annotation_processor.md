# 注解处理器

注解（annotation）是Java 5引入的，用来为类、方法、字段、参数等Java结构提供额外信息的机制。

Java的注解机制允许开发人员自定义注解。这些自定义注解同样可以为Java编译器添加编译规则。不过，这种功能需要由开发人员提供，并且以插件的形式接入Java编译器中，这些插件我们称之为注解处理器（annotation processor）。

## 注解处理器的原理

Java源代码的编译过程可分为三个步骤：
1. 将源文件解析为抽象语法树；
2. 调用已注册的注解处理器；
3. 生成字节码。

如果在第2步调用注解处理器过程中生成了新的源文件，那么编译器将重复第1、2步，解析并且处理新生成的源文件。每次重复我们称之为一轮（Round）。

## 利用注解处理器生成源代码

确切地说，注解处理器并不能真正地修改已有源代码。这里指的是修改由Java源代码生成的抽象语法树，在其中修改已有树节点或者插入新的树节点，从而使生成的字节码发生变化。

用注解处理器来生成源代码则比较常用。JMH工具依赖这种方式来生成测试代码。
